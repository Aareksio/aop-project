function vidFade(){vid.classList.add("stopfade")}function getQuality(e,t){var o=opList.items[e].file.length;if(1==o)return 0;var i=[];if($.each(opList.items[e].file,function(t){i[t]=opList.items[e].file[t].quality}),2==t){var n=i.indexOf("1080p");return n>-1?n:(n=i.indexOf("720p"),n>-1?n:(n=i.indexOf("480p"),n>-1?n:(n=i.indexOf("360p"),n>-1?n:0)))}if(1==t){var n=i.indexOf("480p");return n>-1?n:(n=i.indexOf("360p"),n>-1?n:0)}var n=i.indexOf("360p");return n>-1?n:(n=i.indexOf("480p"),n>-1?n:(n=i.indexOf("720p"),n>-1?n:(n=i.indexOf("1080p"),n>-1?n:0)))}function vidPlay(){var e,t=getQuality(currentVideoId,quality);e=opList.items[currentVideoId].file[t].normalized?"storage/normalized/":"storage/",vidSource.src=e+opList.items[currentVideoId].file[t].filename,vidTitle.innerHTML='<marquee behavior="scroll" scrollamount="3" direction="left" width="246" style="margin-bottom: -5px;">'+opList.items[currentVideoId].title+"</marquee>",qualityInfo.innerHTML=opList.items[currentVideoId].file[t].quality,vid.load(),vid.classList.remove("stopfade"),pauseButton.innerHTML="Pause"}function vidNext(){opListLength-1>currentVideoId?currentVideoId+=1:currentVideoId=0,vidPlay()}function vidPrev(){currentVideoId>0?currentVideoId-=1:currentVideoId=opListLength-1,vidPlay()}function vidRandom(){currentVideoId=Math.floor(Math.random()*opListLength),vidPlay()}function vidPlayId(e){currentVideoId=e,vidPlay()}function vidVolPlus(){volumeBoost?Math.round(100*vid.volume)/100<=.95&&(vid.volume=Math.round(100*vid.volume)/100+.05,vidVolume.innerHTML=Math.round(2*vid.volume*100)+"%",allowCookies&&$.cookie("volume",Math.round(200*vid.volume)/100,{expires:30})):Math.round(100*vid.volume)/100<=.45&&(vid.volume=Math.round(100*vid.volume)/100+.05,vidVolume.innerHTML=Math.round(2*vid.volume*100)+"%",allowCookies&&$.cookie("volume",Math.round(200*vid.volume)/100,{expires:30}))}function vidVolMinus(){volumeBoost?Math.round(100*vid.volume)/100>=.05&&(vid.volume=Math.round(100*vid.volume)/100-.05,vidVolume.innerHTML=Math.round(2*vid.volume*100)+"%",allowCookies&&$.cookie("volume",Math.round(200*vid.volume)/100,{expires:30})):Math.round(100*vid.volume)/100>=.05&&(vid.volume=Math.round(100*vid.volume)/100-.05,vidVolume.innerHTML=Math.round(2*vid.volume*100)+"%",allowCookies&&$.cookie("volume",Math.round(200*vid.volume)/100,{expires:30}))}var opList=function(){var e=null;return $.ajax({async:!1,global:!1,url:"storage/items.json",dataType:"json",success:function(t){e=t}}),e}(),vid=document.getElementById("bgvid"),vidSource=document.querySelector("#bgvid > source"),pauseButton=document.getElementById("vidPause"),prevButton=document.getElementById("vidPrev"),nextButton=document.getElementById("vidNext"),volUpButton=document.getElementById("vidVolUp"),volDownButton=document.getElementById("vidVolDown"),vidVolume=document.getElementById("vidVolume"),vidTitle=document.getElementById("vidTitle"),trackList=document.getElementById("trackList"),trackListToggleButton=document.getElementById("trackListToggle"),generalSettings=document.getElementById("generalSettings"),generalSettingsToggleButton=document.getElementById("generalSettingsToggle"),qualitySettings=document.getElementById("qualitySettings"),qualitySettingsToggleButton=document.getElementById("qualitySettingsToggle"),controlsBoxes=document.getElementsByName("controls"),qualityLowButton=document.getElementById("qualityLow"),qualityMediumButton=document.getElementById("qualityMedium"),qualityHighButton=document.getElementById("qualityHigh"),useCookiesNoButton=document.getElementById("useCookiesNo"),useCookiesYesButton=document.getElementById("useCookiesYes"),useVolumeBoostNoButton=document.getElementById("useVolumeBoostNo"),useVolumeBoostYesButton=document.getElementById("useVolumeBoostYes"),aboutButton=document.getElementById("aboutButton"),aboutClose=document.getElementById("aboutClose"),qualityInfo=document.getElementById("qualityInfo"),databaseSizeInfo=document.getElementById("databaseSizeInfo"),opListLength=opList.items.length,qualityButtons=[qualityLowButton,qualityMediumButton,qualityHighButton],quality,volume,volumeBoost,currentVideoId,currentQuality,startingVolume=.4,startingQuality=2,allowCookies=!1;$.each(opList.items,function(e){$("#trackList").append('<button class="trackListElement" data-id="'+e+'">'+opList.items[e].title+"</button>")});var trackListElements=document.getElementsByClassName("trackListElement");databaseSizeInfo.innerHTML=opListLength,pauseButton.addEventListener("click",function(){vid.classList.toggle("stopfade"),vid.paused?(vid.play(),pauseButton.innerHTML="Pause"):(vid.pause(),pauseButton.innerHTML="Play")}),volUpButton.addEventListener("click",function(){vidVolPlus()}),volDownButton.addEventListener("click",function(){vidVolMinus()}),nextButton.addEventListener("click",function(){vidNext()}),prevButton.addEventListener("click",function(){vidPrev()}),vid.addEventListener("ended",function(){vidRandom()});for(var i=0;i<trackListElements.length;i++)trackListElements[i].addEventListener("click",function(){vidPlayId(parseInt(this.getAttribute("data-id")))});trackListToggleButton.addEventListener("click",function(){this.classList.toggle("active"),trackList.style.display="block"==trackList.style.display?"none":"block"}),qualitySettingsToggleButton.addEventListener("click",function(){this.classList.toggle("active"),qualitySettings.style.display="block"==qualitySettings.style.display?"none":"block"}),generalSettingsToggleButton.addEventListener("click",function(){this.classList.toggle("active"),generalSettings.style.display="block"==generalSettings.style.display?"none":"block"});for(var i=0;i<qualityButtons.length;i++)qualityButtons[i].addEventListener("click",function(){for(var e=0;e<qualityButtons.length;e++)qualityButtons[e].classList.remove("active");this.classList.add("active"),quality=this.getAttribute("data-quality"),allowCookies&&$.cookie("quality",quality,{expires:30});var t=vid.currentTime;vidPlayId(currentVideoId),vid.currentTime=t});useCookiesNoButton.addEventListener("click",function(){useCookiesYesButton.classList.remove("active"),this.classList.add("active"),$.removeCookie("quality"),$.removeCookie("volume"),$.removeCookie("volumeBoost"),allowCookies=!1}),useCookiesYesButton.addEventListener("click",function(){useCookiesNoButton.classList.remove("active"),this.classList.add("active"),$.cookie("quality",quality,{expires:30}),allowCookies=!0,volumeBoost?($.cookie("volumeBoost",!0,{expires:30}),$.cookie("volume",Math.round(200*vid.volume)/100,{expires:30})):$.cookie("volume",Math.round(200*vid.volume)/100,{expires:30})}),useVolumeBoostNoButton.addEventListener("click",function(){useVolumeBoostYesButton.classList.remove("active"),this.classList.add("active"),volumeBoost=!1,allowCookies&&$.removeCookie("volumeBoost"),vid.volume>.5&&(vid.volume=.5,vidVolume.innerHTML=Math.round(2*vid.volume*100)+"%",allowCookies&&$.cookie("volume",Math.round(200*vid.volume)/100,{expires:30}))}),useVolumeBoostYesButton.addEventListener("click",function(){useVolumeBoostNoButton.classList.remove("active"),this.classList.add("active"),volumeBoost=!0,allowCookies&&$.cookie("volumeBoost",!0,{expires:30})}),aboutButton.addEventListener("click",function(){$("#about").toggle()}),aboutClose.addEventListener("click",function(){$("#about").toggle()});var cookieQuality=$.cookie("quality"),cookieVolume=$.cookie("volume"),cookieVolumeBoost=$.cookie("volumeBoost");void 0!=cookieQuality?(quality=cookieQuality,allowCookies=!0,useCookiesYesButton.classList.add("active")):(quality=startingQuality,useCookiesNoButton.classList.add("active")),volume=void 0!=cookieVolume?cookieVolume:startingVolume,cookieVolumeBoost?(useVolumeBoostYesButton.classList.add("active"),volumeBoost=!0):useVolumeBoostNoButton.classList.add("active"),vidPlayId(Math.round(Math.random()*opListLength)),vid.volume=volume/2,vidVolume.innerHTML=Math.round(200*vid.volume)+"%",qualityButtons[quality].classList.add("active");